{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/api/adress.js","webpack:///./src/api/dbconnection.js","webpack:///./src/api/jwt.js","webpack:///./src/api/login.js","webpack:///./src/api/middlewares/jwtAuth.js","webpack:///./src/api/users.js","webpack:///./src/index.js","webpack:///external \"cors\"","webpack:///external \"dotenv/config\"","webpack:///external \"express\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"mysql\"","webpack:///external \"passport\"","webpack:///external \"volleyball\""],"names":["mysql","require","adressRouter","express","Router","auth","verifyJwt","get","req","res","connection","query","err","results","fields","console","log","send","status","content","post","body","name","adress","city","country","postalCode","createConnection","host","user","password","database","connect","result","module","exports","secretKey","process","env","key","issue","payload","expiresIn","jwt","sign","secret","loginRouter","username","token","json","next","userToken","headers","verify","error","decoded","userRouter","id","params","_users","find","put","userExist","updatedFields","forEach","field","delete","filter","app","port","use","cors","volleyball","urlencoded","extended","listen"],"mappings":";;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;AACA,MAAMA,KAAK,GAAGC,mBAAO,CAAC,oBAAD,CAArB;;AACO,MAAMC,YAAY,GAAGC,8CAAO,CAACC,MAAR,EAArB;AAGP,MAAMC,IAAI,GAAGC,8DAAb;AAEAJ,YAAY,CAACK,GAAb,CAAiB,GAAjB,EAAsBF,IAAtB,EAA4B,CAACG,GAAD,EAAMC,GAAN,KAAc;AACxCC,sDAAU,CAACC,KAAX,CAAiB,uBAAjB,EAA0C,CAACC,GAAD,EAAMC,OAAN,EAAeC,MAAf,KAA0B;AAClE,QAAIF,GAAJ,EAAS;AACPG,aAAO,CAACC,GAAR,CAAYJ,GAAZ;AACAH,SAAG,CAACQ,IAAJ,CAAS;AACPL;AADO,OAAT;AAGD,KALD,MAKM;AACJG,aAAO,CAACC,GAAR,CAAYH,OAAZ;AACAJ,SAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAACC,cAAM,EAAE,IAAT;AAAeC,eAAO,EAAEN;AAAxB,OAArB;AACD;AACF,GAVD;AAWD,CAZD;AAcAX,YAAY,CAACkB,IAAb,CAAkB,GAAlB,EAAuBf,IAAvB,EAA6B,CAACG,GAAD,EAAMC,GAAN,KAAc;AACzC,QAAMY,IAAI,GAAGb,GAAG,CAACa,IAAjB;AACA,MAAIC,IAAI,GAAGD,IAAI,CAACC,IAAhB;AACA,MAAIC,MAAM,GAAGF,IAAI,CAACE,MAAlB;AACA,MAAIC,IAAI,GAAGH,IAAI,CAACG,IAAhB;AACA,MAAIC,OAAO,GAAGJ,IAAI,CAACI,OAAnB;AACA,MAAIC,UAAU,GAAGL,IAAI,CAACK,UAAtB;AAGA,MAAIf,KAAK,GAAI,yEAAwEW,IAAK,OAAMC,MAAO,OAAMC,IAAK,OAAMC,OAAQ,OAAMC,UAAW,IAAjJ;AAEEhB,sDAAU,CAACC,KAAX,CAAiBA,KAAjB,EAAwB,CAACC,GAAD,EAAMC,OAAN,EAAeC,MAAf,KAA0B;AAChD,QAAIF,GAAJ,EAAS;AACPG,aAAO,CAACC,GAAR,CAAYJ,GAAZ,EADO,CAEP;;AACAH,SAAG,CAACQ,IAAJ,CAAS;AACPL;AADO,OAAT;AAGD,KAND,MAMK;AACHG,aAAO,CAACC,GAAR,CAAYH,OAAZ;AACAJ,SAAG,CAACQ,IAAJ,CAAS;AACP,gBAAO,GADA;AAEP,mBAAU;AAFH,OAAT;AAID;AACF,GAdD;AAeD,CA1BH,E;;;;;;;;;;;ACvBA;;AAEA,IAAIjB,KAAK,GAAGC,mBAAO,CAAC,oBAAD,CAAnB;;AAEA,IAAIS,UAAU,GAAGV,KAAK,CAAC2B,gBAAN,CAAuB;AACtCC,MAAI,EAAE,WADgC;AAEtCC,MAAI,EAAE,MAFgC;AAGtCC,UAAQ,EAAE,EAH4B;AAItCC,UAAQ,EAAE;AAJ4B,CAAvB,CAAjB;AAOErB,UAAU,CAACsB,OAAX,CAAmB,UAASpB,GAAT,EAAc;AAC/B,MAAIA,GAAJ,EAAS,MAAMA,GAAN;AACTG,SAAO,CAACC,GAAR,CAAY,YAAZ,EAF+B,CAI/B;;AACFN,YAAU,CAACC,KAAX,CAAiB,kEAAjB,EAAqF,UAAUC,GAAV,EAAeqB,MAAf,EAAuB;AAC1G,QAAIrB,GAAJ,EAAS,MAAMA,GAAN;AACTG,WAAO,CAACC,GAAR,CAAY,kBAAZ;AACD,GAHD;AAKAN,YAAU,CAACC,KAAX,CAAiB,sTAAjB,EAA0U,UAAUC,GAAV,EAAeqB,MAAf,EAAuB;AAC/V,QAAIrB,GAAJ,EAAS,MAAMA,GAAN;AACTG,WAAO,CAACC,GAAR,CAAY,qBAAZ;AACD,GAHD;AAKAN,YAAU,CAACC,KAAX,CAAiB,+LAAjB,EAAkN,UAAUC,GAAV,EAAeqB,MAAf,EAAuB;AACvO,QAAIrB,GAAJ,EAAS,MAAMA,GAAN;AACTG,WAAO,CAACC,GAAR,CAAY,sBAAZ;AACD,GAHD;AAID,CAnBC;AAqBFkB,MAAM,CAACC,OAAP,GAAiBzB,UAAjB,C;;;;;;;;;;;;AChCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA,MAAM0B,SAAS,GAAGC,OAAO,CAACC,GAAR,CAAYC,GAA9B;AAEe;AAEX;AACAC,OAAK,CAACC,OAAD,EAAUC,SAAV,EAAoB;AACvB,WAAOC,mDAAG,CAACC,IAAJ,CAASH,OAAT,EAAkBL,SAAlB,EAA6B;AAACM,eAAS,EAAE;AAAZ,KAA7B,CAAP;AACH;;AALY,CAAf,E;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA,MAAMG,MAAM,GAAGR,OAAO,CAACC,GAAR,CAAYC,GAA3B;AAEO,MAAMO,WAAW,GAAG3C,8CAAO,CAACC,MAAR,EAApB;AAGP0C,WAAW,CAAC1B,IAAZ,CAAiB,GAAjB,EAAsB,CAACZ,GAAD,EAAMC,GAAN,KAAc;AAElC,QAAM;AAAEqB,YAAF;AAAYiB;AAAZ,MAAyBvC,GAAG,CAACa,IAAnC,CAFkC,CAIlC;;AACA,MAAIV,KAAK,GAAI,yCAAwCoC,QAAS,GAA9D;AAEArC,sDAAU,CAACC,KAAX,CAAiBA,KAAjB,EAAwB,CAACC,GAAD,EAAMC,OAAN,KAAkB;AAExC,QAAG,CAACA,OAAJ,EAAaJ,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,gBAArB;AACX,QAAGJ,OAAO,CAAC,CAAD,CAAP,CAAWiB,QAAX,KAAwBA,QAA3B,EAAqC,OAAOrB,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,oBAArB,CAAP;AAErC,UAAM+B,KAAK,GAAGL,4CAAG,CAACH,KAAJ,CAAU;AACtBO;AADsB,KAAV,EAEXF,MAFW,EAEH;AAACH,eAAS,EAAE;AAAZ,KAFG,CAAd;AAGA3B,WAAO,CAACC,GAAR,CAAYgC,KAAZ;AACAvC,OAAG,CAACwC,IAAJ,CAAS;AAAC,eAASD;AAAV,KAAT;AACD,GAVH;AAWD,CAlBD,E;;;;;;;;;;;;ACXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA,MAAMH,MAAM,GAAGR,OAAO,CAACC,GAAR,CAAYC,GAA3B;AAEO,MAAMjC,SAAS,GAAG,CAACE,GAAD,EAAMC,GAAN,EAAWyC,IAAX,KAAoB;AAC3C,QAAMC,SAAS,GAAG3C,GAAG,CAAC4C,OAAJ,CAAY,OAAZ,CAAlB;AAEAT,qDAAG,CAACU,MAAJ,CAAWF,SAAX,EAAsBN,MAAtB,EAA8B,CAACS,KAAD,EAAQC,OAAR,KAAoB;AAChD,QAAGD,KAAH,EAAU7C,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,oBAArB,EAAV,KACK;AACHR,SAAG,CAACS,MAAJ,CAAW,GAAX;AACAgC,UAAI;AACL;AACF,GAND;AAOD,CAVM,C;;;;;;;;;;;;ACPP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;CACA;;AACA;AACA;CAEA;;AACA;;AACA,MAAMlD,KAAK,GAAGC,mBAAO,CAAC,oBAAD,CAArB;;AACO,MAAMuD,UAAU,GAAGrD,8CAAO,CAACC,MAAR,EAAnB,C,CAEP;;AAEA,MAAMC,IAAI,GAAGC,8DAAb,C,CAEA;AACA;AAEA;AACA;;AAEA;;;;;;;AAMAkD,UAAU,CAACjD,GAAX,CAAe,GAAf,EAAoBF,IAApB,EAA0B,CAACG,GAAD,EAAMC,GAAN,KAAc;AACtCC,sDAAU,CAACC,KAAX,CAAiB,sBAAjB,EAAyC,CAACC,GAAD,EAAMC,OAAN,EAAeC,MAAf,KAA0B;AACjE,QAAIF,GAAJ,EAAS;AACPG,aAAO,CAACC,GAAR,CAAYJ,GAAZ,EADO,CAEP;;AACAH,SAAG,CAACQ,IAAJ,CAAS;AACPL;AADO,OAAT;AAGD,KAND,MAMM;AACJG,aAAO,CAACC,GAAR,CAAYH,OAAZ;AACAJ,SAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAACC,cAAM,EAAE,IAAT;AAAeC,eAAO,EAAEN;AAAxB,OAArB;AACD;AACF,GAXD;AAYD,CAbD;AAeA2C,UAAU,CAACjD,GAAX,CAAe,MAAf,EAAuBF,IAAvB,EAA6B,CAACG,GAAD,EAAMC,GAAN,KAAc;AACzC,QAAMgD,EAAE,GAAGjD,GAAG,CAACkD,MAAJ,CAAWD,EAAtB;;AACA,QAAM5B,IAAI,GAAG8B,MAAM,CAACC,IAAP,CAAa/B,IAAD,IAAUA,IAAI,CAAC4B,EAAL,IAAWA,EAAjC,CAAb;;AAEA,MAAI5B,IAAJ,EAAUpB,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqBY,IAArB,EAAV,KACKpB,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,gBAArB;AACN,CAND;AAQAuC,UAAU,CAACpC,IAAX,CAAgB,GAAhB,EAAqB,CAACZ,GAAD,EAAMC,GAAN,KAAc;AACjC,QAAMY,IAAI,GAAGb,GAAG,CAACa,IAAjB;AACA,MAAI0B,QAAQ,GAAG1B,IAAI,CAAC0B,QAApB;AACA,MAAIjB,QAAQ,GAAGT,IAAI,CAACS,QAApB;;AAEA,MAAI,CAACiB,QAAD,IAAa,CAACjB,QAAlB,EAA4B;AAC1BrB,OAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,mCAArB;AACD,GAFD,MAEK;AAEH,QAAIN,KAAK,GAAI,mDAAkDoC,QAAS,OAAMjB,QAAS,IAAvF;AAEApB,wDAAU,CAACC,KAAX,CAAiBA,KAAjB,EAAwB,CAACC,GAAD,EAAMC,OAAN,EAAeC,MAAf,KAA0B;AAChD,UAAIF,GAAJ,EAAS;AACPG,eAAO,CAACC,GAAR,CAAYJ,GAAZ,EADO,CAEP;;AACAH,WAAG,CAACQ,IAAJ,CAAS;AACPL;AADO,SAAT;AAGD,OAND,MAMK;AACHG,eAAO,CAACC,GAAR,CAAYH,OAAZ;AACAJ,WAAG,CAACQ,IAAJ,CAAS;AACP,kBAAO,GADA;AAEP,qBAAU;AAFH,SAAT;AAID;AACF,KAdD;AAeD;AACF,CA3BD;AA6BAuC,UAAU,CAACK,GAAX,CAAe,MAAf,EAAuBxD,IAAvB,EAA6B,CAACG,GAAD,EAAMC,GAAN,KAAc;AACzC,QAAMgD,EAAE,GAAGjD,GAAG,CAACkD,MAAJ,CAAWD,EAAtB;AACA,QAAM5B,IAAI,GAAGiC,SAAS,CAACL,EAAD,CAAtB;AAEA,QAAMM,aAAa,GAAG,CAAC,WAAD,EAAc,UAAd,EAA0B,UAA1B,CAAtB;;AAEA,MAAIlC,IAAJ,EAAU;AACR,UAAMR,IAAI,GAAGb,GAAG,CAACa,IAAjB;AAEA0C,iBAAa,CAACC,OAAd,CAAuBC,KAAD,IAAW;AAC/B,UAAIzD,GAAG,CAACa,IAAJ,CAAS4C,KAAT,CAAJ,EAAqBpC,IAAI,CAACoC,KAAD,CAAJ,GAAczD,GAAG,CAACa,IAAJ,CAAS4C,KAAT,CAAd;AACtB,KAFD;AAIAxD,OAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqBY,IAArB;AACD,GARD,MAQOpB,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,gBAArB;AACR,CAfD;AAiBAuC,UAAU,CAACU,MAAX,CAAkB,MAAlB,EAA0B7D,IAA1B,EAAgC,CAACG,GAAD,EAAMC,GAAN,KAAc;AAC5C,QAAMgD,EAAE,GAAGjD,GAAG,CAACkD,MAAJ,CAAWD,EAAtB;AACA,QAAM5B,IAAI,GAAGiC,SAAS,CAACL,EAAD,CAAtB;;AAEA,MAAI5B,IAAJ,EAAU;AACR8B,UAAM,GAAGA,MAAM,CAACQ,MAAP,CAAetC,IAAD,IAAUA,IAAI,CAAC4B,EAAL,IAAWA,EAAnC,CAAT;AAEAhD,OAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,EAArB;AACD,GAJD,MAIO;AACLR,OAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,gBAArB;AACD;AACF,CAXD,E;;;;;;;;;;;;AC/FA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;CAEA;;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMmD,GAAG,GAAGjE,8CAAO,EAAnB;AAEA,MAAMkE,IAAI,GAAG,IAAb;AAEAD,GAAG,CAACE,GAAJ,CAAQC,2CAAI,EAAZ;AACAH,GAAG,CAACE,GAAJ,CAAQE,iDAAR;AACAJ,GAAG,CAACE,GAAJ,CAAQnE,8CAAO,CAAC8C,IAAR,EAAR;AACAmB,GAAG,CAACE,GAAJ,CAAQnE,8CAAO,CAACsE,UAAR,CAAmB;AACzBC,UAAQ,EAAE;AADe,CAAnB,CAAR,E,CAIA;AACA;;AAEAN,GAAG,CAACE,GAAJ,CAAQ,QAAR,EAAkBd,qDAAlB;AACAY,GAAG,CAACE,GAAJ,CAAQ,QAAR,EAAkBxB,sDAAlB;AACAsB,GAAG,CAACE,GAAJ,CAAQ,SAAR,EAAmBpE,wDAAnB;AAEAkE,GAAG,CAAC7D,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBM,SAAO,CAACC,GAAR,CAAY,aAAZ;AACAP,KAAG,CAACwC,IAAJ,CAAS,WAAT;AACD,CAHD;AAMAmB,GAAG,CAACO,MAAJ,CAAWN,IAAX,EAAiB,MAAMtD,OAAO,CAACC,GAAR,CAAa,2BAA0BqD,IAAK,EAA5C,CAAvB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClCA,iC;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,qC;;;;;;;;;;;ACAA,uC","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import express from 'express';\nimport { verifyJwt } from './middlewares/jwtAuth';\nimport connection from './dbconnection';\nconst mysql = require('mysql');\nexport const adressRouter = express.Router()\n\n\nconst auth = verifyJwt;\n\nadressRouter.get('/', auth, (req, res) => {\n  connection.query('SELECT * FROM adress ', (err, results, fields) => {\n    if (err) {\n      console.log(err);\n      res.send({\n        err\n      })\n    }else {\n      console.log(results)\n      res.status(200).send({status: true, content: results});\n    }\n  });\n});\n\nadressRouter.post('/', auth, (req, res) => {\n  const body = req.body;\n  let name = body.name;\n  let adress = body.adress;\n  let city = body.city;\n  let country = body.country;\n  let postalCode = body.postalCode;\n\n\n  let query = `INSERT INTO adress (name, adress, city, country, postalCode) VALUES ('${name}', '${adress}', '${city}', '${country}', '${postalCode}')`;\n\n    connection.query(query, (err, results, fields) => {\n      if (err) {\n        console.log(err);\n        // res.status(400).send({ status: false, message: 'User not created'})\n        res.send({\n          err\n        })\n      }else{\n        console.log(results);\n        res.send({\n          \"code\":200,\n          \"success\":\"new adress registered sucessfully\"\n        });\n      }\n    })\n  })","'user strict';\n\nvar mysql = require('mysql');\n\nvar connection = mysql.createConnection({\n  host: \"localhost\",\n  user: \"root\",\n  password: \"\",\n  database: \"superHeroesDB\",\n});\n\n  connection.connect(function(err) {\n    if (err) throw err;\n    console.log(\"Connected!\");\n\n    // création de la dB\n  connection.query(\"CREATE DATABASE IF NOT EXISTS superHeroesDB CHARACTER SET 'utf8'\", function (err, result) {\n    if (err) throw err;\n    console.log(\"database created\");\n  });\n\n  connection.query(\"CREATE TABLE IF NOT EXISTS superHeroesDB.users (userID INT NOT NULL UNIQUE AUTO_INCREMENT, username VARCHAR(50) NOT NULL UNIQUE, createdat TIMESTAMP, firstname VARCHAR(255) NOT NULL, lastname VARCHAR(255) NOT NULL, avatarUrl VARCHAR(500), addressID INT NOT NULL, password VARCHAR(40) NOT NULL, birthday DATE)\",  function (err, result) {\n    if (err) throw err;\n    console.log(\"Table users created\");\n  });\n\n  connection.query(\"CREATE TABLE IF NOT EXISTS superHeroesDB.adress(adressID INT NOT NULL UNIQUE AUTO_INCREMENT, name VARCHAR(255), adress VARCHAR(255), city VARCHAR(255), country VARCHAR(255), postalCode INT)\", function (err, result) {\n    if (err) throw err;\n    console.log(\"Table adress created\");\n  });\n});\n\nmodule.exports = connection;","import jwt from 'jsonwebtoken';\nimport \"dotenv/config\";\nimport _user from '../../users.json'\n\nconst secretKey = process.env.key\n\nexport default {\n\n    //Sign Token\n    issue(payload, expiresIn){\n      return jwt.sign(payload, secretKey, {expiresIn: 10800})\n  }\n}\n","import express from 'express'\nimport jwt from './jwt';\nimport _users from '../../users.json';\nimport 'dotenv/config';\nimport connection from './dbconnection';\n\nconst secret = process.env.key;\n\nexport const loginRouter = express.Router();\n\n\nloginRouter.post('/', (req, res) => {\n\n  const { password, username } = req.body\n\n  // const user = _users.find((user) => user.username === req.body.username);\n  let query = `SELECT * FROM users WHERE username = '${username}'`;\n\n  connection.query(query, (err, results) => {\n\n    if(!results) res.status(404).send('User not found')\n      if(results[0].password !== password) return res.status(404).send('Password incorrect')\n\n      const token = jwt.issue({\n        username\n      }, secret, {expiresIn: 18000})\n      console.log(token)\n      res.json({'token': token})\n    })\n})","// import _users from '../../../users.json';\n// import jwt from './jwt';\nimport jwt from 'jsonwebtoken';\nimport 'dotenv/config';\n\nconst secret = process.env.key\n\nexport const verifyJwt = (req, res, next) => {\n  const userToken = req.headers['token'];\n\n  jwt.verify(userToken, secret, (error, decoded) => {\n    if(error) res.status(403).send('Token is not valid')\n    else {\n      res.status(200)\n      next()\n    }\n  })\n}\n","import express from 'express';\n// import _users from '../../users.json';\nimport passport from 'passport'\nimport jwt from 'jsonwebtoken';\nimport { verifyJwt } from './middlewares/jwtAuth';\n// const db = require ('./dbconnection');\nimport connection from './dbconnection';\nconst mysql = require('mysql');\nexport const userRouter = express.Router()\n\n// const auth =passport.authenticate('jwt', {session:false})\n\nconst auth = verifyJwt;\n\n// function userExist(id) {\n//   const user = _users.find((user) => user.id == id);\n\n//   return user;\n// }\n\n/**\n * req: Object containing all the request information,\n *      such as headers, params, body.\n *\n * res: Object containing all the response methods and information\n */\nuserRouter.get('/', auth, (req, res) => {\n  connection.query('SELECT * FROM users ', (err, results, fields) => {\n    if (err) {\n      console.log(err);\n      // res.status(400).send({ status: false, message: 'User not created'})\n      res.send({\n        err\n      })\n    }else {\n      console.log(results)\n      res.status(200).send({status: true, content: results});\n    }\n  });\n});\n\nuserRouter.get('/:id', auth, (req, res) => {\n  const id = req.params.id;\n  const user = _users.find((user) => user.id == id);\n\n  if (user) res.status(200).send(user);\n  else res.status(404).send('User not found');\n});\n\nuserRouter.post('/', (req, res) => {\n  const body = req.body;\n  let username = body.username;\n  let password = body.password;\n\n  if (!username || !password) {\n    res.status(412).send('Username and password are invalid')\n  }else{\n\n    let query = `INSERT INTO users (username, password) VALUES ('${username}', '${password}')`;\n\n    connection.query(query, (err, results, fields) => {\n      if (err) {\n        console.log(err);\n        // res.status(400).send({ status: false, message: 'User not created'})\n        res.send({\n          err\n        })\n      }else{\n        console.log(results);\n        res.send({\n          \"code\":200,\n          \"success\":\"new user registered sucessfully\"\n        });\n      }\n    })\n  }\n})\n\nuserRouter.put('/:id', auth, (req, res) => {\n  const id = req.params.id;\n  const user = userExist(id);\n\n  const updatedFields = ['firstname', 'lastname', 'birthday'];\n\n  if (user) {\n    const body = req.body;\n\n    updatedFields.forEach((field) => {\n      if (req.body[field]) user[field] = req.body[field];\n    });\n\n    res.status(200).send(user);\n  } else res.status(404).send('User not found');\n});\n\nuserRouter.delete('/:id', auth, (req, res) => {\n  const id = req.params.id;\n  const user = userExist(id);\n\n  if (user) {\n    _users = _users.filter((user) => user.id != id);\n\n    res.status(200).send('');\n  } else {\n    res.status(404).send('User not found');\n  }\n});\n","import express from 'express';\nimport volleyball from 'volleyball';\nimport passport from 'passport'\n// import {configJWTStrategy} from './api/middlewares/auth';\nimport 'dotenv/config';\nimport cors from 'cors';\nimport { userRouter } from './api/users';\nimport { loginRouter } from './api/login';\nimport { adressRouter } from './api/adress';\n\nconst app = express();\n\nconst port = 5454;\n\napp.use(cors());\napp.use(volleyball);\napp.use(express.json())\napp.use(express.urlencoded({\n  extended: true\n}));\n\n// app.use(passport.initialize());\n// configJWTStrategy();\n\napp.use('/users', userRouter);\napp.use('/login', loginRouter);\napp.use('/adress', adressRouter);\n\napp.get('/', (req, res) => {\n  console.log('tout est ok')\n  res.json('ça marche')\n})\n\n\napp.listen(port, () => console.log(`[Express] is running on ${port}`))\n\n","module.exports = require(\"cors\");","module.exports = require(\"dotenv/config\");","module.exports = require(\"express\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"mysql\");","module.exports = require(\"passport\");","module.exports = require(\"volleyball\");"],"sourceRoot":""}